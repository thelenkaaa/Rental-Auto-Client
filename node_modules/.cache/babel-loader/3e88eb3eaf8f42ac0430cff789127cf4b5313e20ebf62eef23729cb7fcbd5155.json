{"ast":null,"code":"const server_url = 'http://localhost:63341';\nexport async function fetch_data_error(rel_url, method) {\n  let body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let authorized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  const url = server_url + rel_url;\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (authorized) {\n    headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n  }\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: headers,\n      body: body && JSON.stringify(body)\n    });\n    const data = await response.json();\n    if (!response.ok) {\n      console.log(response);\n      throw new Error(response.status + ': ' + response.statusText);\n    }\n    return data;\n  } catch (error) {\n    alert(`Failed to fetch ${url}: ${error.message}`);\n  }\n}","map":{"version":3,"names":["server_url","fetch_data_error","rel_url","method","body","arguments","length","undefined","authorized","url","headers","localStorage","getItem","response","fetch","JSON","stringify","data","json","ok","console","log","Error","status","statusText","error","alert","message"],"sources":["/Users/lenka/Documents/Web/Web-technologies/src/utils/api_error.tsx"],"sourcesContent":["const server_url = 'http://localhost:63341';\n\nexport async function fetch_data_error(rel_url: string, method: string, body: any=null, authorized=true) {\n    const url = server_url + rel_url;\n    const headers: Record<string, string> = {\n        'Content-Type': 'application/json'\n    };\n    if (authorized){\n        headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n    }\n    \n    try {\n        const response = await fetch(url, {\n            method: method,\n            headers: headers,\n            body: body && JSON.stringify(body)\n        })\n        const data = await response.json()\n        if (!response.ok) {\n            console.log(response)\n            throw new Error(response.status + ': ' + response.statusText)\n        }\n        \n        return data\n    } catch (error: any) {\n        alert(`Failed to fetch ${url}: ${error.message}`)\n    }\n}\n"],"mappings":"AAAA,MAAMA,UAAU,GAAG,wBAAwB;AAE3C,OAAO,eAAeC,gBAAgBA,CAACC,OAAe,EAAEC,MAAc,EAAmC;EAAA,IAAjCC,IAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EAAA,IAAEG,UAAU,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EACnG,MAAMI,GAAG,GAAGT,UAAU,GAAGE,OAAO;EAChC,MAAMQ,OAA+B,GAAG;IACpC,cAAc,EAAE;EACpB,CAAC;EACD,IAAIF,UAAU,EAAC;IACXE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAE,EAAC;EAC/E;EAEA,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;MAC9BN,MAAM,EAAEA,MAAM;MACdO,OAAO,EAAEA,OAAO;MAChBN,IAAI,EAAEA,IAAI,IAAIW,IAAI,CAACC,SAAS,CAACZ,IAAI;IACrC,CAAC,CAAC;IACF,MAAMa,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,EAAE;IAClC,IAAI,CAACL,QAAQ,CAACM,EAAE,EAAE;MACdC,OAAO,CAACC,GAAG,CAACR,QAAQ,CAAC;MACrB,MAAM,IAAIS,KAAK,CAACT,QAAQ,CAACU,MAAM,GAAG,IAAI,GAAGV,QAAQ,CAACW,UAAU,CAAC;IACjE;IAEA,OAAOP,IAAI;EACf,CAAC,CAAC,OAAOQ,KAAU,EAAE;IACjBC,KAAK,CAAE,mBAAkBjB,GAAI,KAAIgB,KAAK,CAACE,OAAQ,EAAC,CAAC;EACrD;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}