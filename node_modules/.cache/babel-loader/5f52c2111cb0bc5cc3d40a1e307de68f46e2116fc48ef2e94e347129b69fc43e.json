{"ast":null,"code":"const server_url = 'http://localhost:63341';\nexport async function fetch_data(rel_url, method) {\n  let body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let authorized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  const url = server_url + rel_url;\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (authorized) {\n    headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n  }\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: headers,\n      body: body && JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw new Error(response.status + ': ' + response.statusText);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    const errorMessage = await Response.json();\n    throw new Error(`Failed to fetch ${url}: ${error.message}`);\n  }\n}","map":{"version":3,"names":["server_url","fetch_data","rel_url","method","body","arguments","length","undefined","authorized","url","headers","localStorage","getItem","response","fetch","JSON","stringify","ok","Error","status","statusText","data","json","error","errorMessage","Response","message"],"sources":["/Users/lenka/Documents/Web/Web-technologies/src/utils/api.tsx"],"sourcesContent":["const server_url = 'http://localhost:63341';\n\nexport async function fetch_data(rel_url: string, method: string, body: any=null, authorized=true) {\n    const url = server_url + rel_url;\n    const headers: Record<string, string> = {\n        'Content-Type': 'application/json'\n    };\n    if (authorized){\n        headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n    }\n    \n    try {\n        const response = await fetch(url, {\n            method: method,\n            headers: headers,\n            body: body && JSON.stringify(body)\n        })\n        if (!response.ok) {\n            throw new Error(response.status + ': ' + response.statusText)\n        }\n        const data = await response.json()\n        return data\n    } catch (error: any) {\n        const errorMessage = await Response.json()\n        throw new Error(`Failed to fetch ${url}: ${error.message}`)\n    }\n}\n"],"mappings":"AAAA,MAAMA,UAAU,GAAG,wBAAwB;AAE3C,OAAO,eAAeC,UAAUA,CAACC,OAAe,EAAEC,MAAc,EAAmC;EAAA,IAAjCC,IAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EAAA,IAAEG,UAAU,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EAC7F,MAAMI,GAAG,GAAGT,UAAU,GAAGE,OAAO;EAChC,MAAMQ,OAA+B,GAAG;IACpC,cAAc,EAAE;EACpB,CAAC;EACD,IAAIF,UAAU,EAAC;IACXE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAE,EAAC;EAC/E;EAEA,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAE;MAC9BN,MAAM,EAAEA,MAAM;MACdO,OAAO,EAAEA,OAAO;MAChBN,IAAI,EAAEA,IAAI,IAAIW,IAAI,CAACC,SAAS,CAACZ,IAAI;IACrC,CAAC,CAAC;IACF,IAAI,CAACS,QAAQ,CAACI,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAACL,QAAQ,CAACM,MAAM,GAAG,IAAI,GAAGN,QAAQ,CAACO,UAAU,CAAC;IACjE;IACA,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,EAAE;IAClC,OAAOD,IAAI;EACf,CAAC,CAAC,OAAOE,KAAU,EAAE;IACjB,MAAMC,YAAY,GAAG,MAAMC,QAAQ,CAACH,IAAI,EAAE;IAC1C,MAAM,IAAIJ,KAAK,CAAE,mBAAkBT,GAAI,KAAIc,KAAK,CAACG,OAAQ,EAAC,CAAC;EAC/D;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}