{"ast":null,"code":"export async function fetch_data(rel_url, method) {\n  let body = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let authorized = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  const url = server_url + rel_url;\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (authorized) {\n    headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n  }\n  console.log('headers:', headers); // add this line to log the headers being sent\n\n  try {\n    const response = await fetch(url, {\n      method: method,\n      headers: headers,\n      body: body && JSON.stringify(body)\n    });\n    if (!response.ok) {\n      throw new Error(response.status + ': ' + response.statusText);\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    throw new Error(`Failed to fetch ${url}: ${error.message}`);\n  }\n}","map":{"version":3,"names":["fetch_data","rel_url","method","body","arguments","length","undefined","authorized","url","server_url","headers","localStorage","getItem","console","log","response","fetch","JSON","stringify","ok","Error","status","statusText","data","json","error","message"],"sources":["/Users/lenka/Documents/Web/Web-technologies/src/utils/api.tsx"],"sourcesContent":["export async function fetch_data(rel_url: string, method: string, body: any=null, authorized=true) {\n    const url = server_url + rel_url;\n    const headers: Record<string, string> = {\n        'Content-Type': 'application/json'\n    };\n    if (authorized){\n        headers['Authorization'] = `Bearer ${localStorage.getItem('access_token')}`;\n    }\n    \n    console.log('headers:', headers); // add this line to log the headers being sent\n\n    try {\n        const response = await fetch(url, {\n            method: method,\n            headers: headers,\n            body: body && JSON.stringify(body)\n        })\n        if (!response.ok) {\n            throw new Error(response.status + ': ' + response.statusText)\n        }\n        const data = await response.json()\n        return data\n    } catch (error: any) {\n        throw new Error(`Failed to fetch ${url}: ${error.message}`)\n    }\n}\n"],"mappings":"AAAA,OAAO,eAAeA,UAAUA,CAACC,OAAe,EAAEC,MAAc,EAAmC;EAAA,IAAjCC,IAAS,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EAAA,IAAEG,UAAU,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,IAAI;EAC7F,MAAMI,GAAG,GAAGC,UAAU,GAAGR,OAAO;EAChC,MAAMS,OAA+B,GAAG;IACpC,cAAc,EAAE;EACpB,CAAC;EACD,IAAIH,UAAU,EAAC;IACXG,OAAO,CAAC,eAAe,CAAC,GAAI,UAASC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAE,EAAC;EAC/E;EAEAC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEJ,OAAO,CAAC,CAAC,CAAC;;EAElC,IAAI;IACA,MAAMK,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAE;MAC9BN,MAAM,EAAEA,MAAM;MACdQ,OAAO,EAAEA,OAAO;MAChBP,IAAI,EAAEA,IAAI,IAAIc,IAAI,CAACC,SAAS,CAACf,IAAI;IACrC,CAAC,CAAC;IACF,IAAI,CAACY,QAAQ,CAACI,EAAE,EAAE;MACd,MAAM,IAAIC,KAAK,CAACL,QAAQ,CAACM,MAAM,GAAG,IAAI,GAAGN,QAAQ,CAACO,UAAU,CAAC;IACjE;IACA,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,EAAE;IAClC,OAAOD,IAAI;EACf,CAAC,CAAC,OAAOE,KAAU,EAAE;IACjB,MAAM,IAAIL,KAAK,CAAE,mBAAkBZ,GAAI,KAAIiB,KAAK,CAACC,OAAQ,EAAC,CAAC;EAC/D;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}